<h1>Apartment Gallery</h1>

<% photo = 0 %>

<% @listing.listingphotos.each do |image| %>
<button type="button" data-toggle="modal" data-target="#preview<%= photo %>">
  <%= image_tag(image.photo.url(:medium)) %>
</button>
<td><%= link_to 'Delete photo', image, method: :delete, data: { confirm: 'Are you sure you want to delete this image?' } %></td>

<div class="modal fade" id="preview<%= photo %>" tabindex="-1" role="dialog" aria-labelledby="previewLabel">
      <div class="preview modal-header">
        <button type="button" class="preview close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="preview modal-body">
        <%= image_tag(image.photo.url) %>
      </div>
</div>

<% photo += 1 %>
<% end %>
<%= link_to 'Return to Apartment Listing', listing_path(current_user.listing.id) %>
