<!-- <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner" role="listbox">
    <div class="carousel-item active">
      <img src= @listing.listingphotos.first.photo.url , alt="First slide", class="d-block img-fluid">
    </div>
    <div class="carousel-item">
      <img src=@listing.listingphotos[1].photo.url , alt="First slide", class="d-block img-fluid" >
    </div>
    <div class="carousel-item">
      <img src=@listing.listingphotos[2].photo.url , alt="First slide", class="d-block img-fluid" >
    </div>
    <div class="carousel-item">
      <img src=@listing.listingphotos[3].photo.url , alt="First slide", class="d-block img-fluid" >
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div> -->

<div class="listing-slides">
  <% if @listing.listingphotos.first %>
    <% if @listing.listingphotos.first %>
    <%= image_tag @listing.listingphotos.first.photo.url, alt:"First slide", class: "photo-slide photo-slide-1 active"%>
    <% end %>

    <% if @listing.listingphotos.second %>
    <%= image_tag @listing.listingphotos.second.photo.url, alt:"Second slide", class: "photo-slide photo-slide-2"%>
    <% end %>

    <% if @listing.listingphotos.third %>
    <%= image_tag @listing.listingphotos.third.photo.url, alt:"Third slide", class: "photo-slide photo-slide-3"%>
    <% end %>
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
  <% end %>
</div>

<div class="profile_picture listing-profile">
  <% if @listing.user && @listing.user.picture %>
    <%= image_tag @listing.user.picture %>
  <% else %>
    <img src="/assets/missing.jpg">
  <% end %>
  <div class="similarity_info">
    <div>
      <h1>
        <%= current_user.similarity_with(@listing.user) %>
      </h1>
    </div>
  </div>
  <div class="profile_panel">
    <h2>
      <%= @listing.user.name %>
    </h2>

    <% if current_user.friends.include?(@listing.user) %>
        <%= link_to "Email Friend", @listing.user, class: "btn btn-danger" %>
        <br>
        <br>
        <%= link_to "Remove Friend", remove_path %>
        <br>
    <% elsif current_user.requests_to.include?(@listing.user)%>
        <%= link_to "Cancel Request", cancel_path(@listing.user), class: "btn btn-default" %>
    <% elsif current_user.requests_from.include?(@listing.user) %>
        <%= link_to "Accept", accept_path, class: "btn btn-primary" %>
        <%= link_to "Ignore", ignore_path, class: "btn btn-default" %>
    <% elsif current_user == @listing.user %>
      <br>
    <% else %>
        <%= link_to "Add Friend", request_path, class: "btn btn-info" %>
    <% end %>
    <% if @listing.user.responses.last.nil? && @listing.user == current_user %>
      <%= link_to "Complete Questionnaire", response_path, class: "btn btn-success" %>
    <% end %>
    <% if @listing.user == current_user %>
      <%= link_to 'Edit Login', edit_user_path(@listing.user),  class: "btn btn-default edit_profile"%>
    <% end %>
  </div>
</div>

<!-- <p id="notice"><%= notice %></p>
<% if @listing == current_user.listing %>
  <p>
    <%= link_to "Edit Your Listing", edit_listing_path %>
  </p>
<% end %>
<p>
  <strong>User:</strong>
  <%= User.find(@listing.user_id).name %>
</p>

<p>
  <strong>Address:</strong>
  <%= @listing.address%>, <%= '#'+@listing.apt_number unless @listing.apt_number == nil%> <%= @listing.city%>, <%= @listing.state%>, <%= @listing.zipcode %>
</p>

<p>
  <strong>Rent:</strong>
  <%= @listing.rent %>
</p>

<p>
  <strong>Amenities:</strong>
  <%= @listing.amenities %>
</p>

<p>
  <strong>Rules:</strong>
</p>

<p>
  <strong>Apartment Photos:</strong> <br>
  <% @listing.listingphotos.each do |image| %>
  <div class="listing_preview col-md-3">
    <%= link_to(image_tag(image.photo.url(:medium)), image) %>
  </div>
  <% end %>
</p>

<p>
  <strong>Description:</strong>
  <%= @listing.description %>
</p> -->


<!-- <div id="map"></div>

<script>
  window.addresses = [];
  window.addresses.push("<%= [@listing.address, @listing.city, @listing.state, @listing.zipcode].join(",") %>");
</script>
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDPW_yVez7lt-3QKXCXk97t43Q2TdZkQZQ&libraries=places&callback=initMap"
    async defer></script> -->

<!-- <% if current_user.listing && @listing == current_user.listing %>
  <%= link_to 'Edit Your Apartment', edit_listing_path(@listing) %>
  <% if current_user.listing.listingphotos == 0 %>
    | <%= link_to 'Add Photos to Your Apartment', new_listingphoto_path %>
  <% elsif current_user.listing.listingphotos.size > 0 && current_user.listing.listingphotos.size < 12 %>
    | <%= link_to 'Add Photos to Your Apartment', new_listingphoto_path %>
    | <%= link_to 'Edit Your Apartment Photos', listingphoto_path %>
  <% else %>
    | <%= link_to 'Edit Your Apartment Photos', listingphoto_path %>
  <% end %>
<% end %> -->
